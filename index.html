<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Scorekeeper Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
  <meta name="theme-color" content="#050816" />

  <style>
    :root{
      --bg:#050816;
      --bg2:#0b1224;

      --text:#f9fafb;
      --muted:#9ca3af;

      --accent:#f97316;
      --accent2:#fb923c;

      --border: rgba(148,163,184,0.18);
      --shadow: 0 18px 45px rgba(0,0,0,0.38);
      --shadow2: 0 12px 26px rgba(0,0,0,0.26);

      --radius: 20px;
    }

    *{ box-sizing:border-box; }
    html, body{ height:100%; }

    body{
      margin:0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: var(--text);
      background:
        radial-gradient(900px 600px at 15% 0%, rgba(249,115,22,0.20), transparent 60%),
        radial-gradient(900px 600px at 85% 12%, rgba(56,189,248,0.10), transparent 55%),
        linear-gradient(180deg, var(--bg), var(--bg2));
      overflow-x:hidden;
    }

    .safe{
      padding-top: max(14px, env(safe-area-inset-top));
      padding-bottom: max(14px, env(safe-area-inset-bottom));
      padding-left: max(14px, env(safe-area-inset-left));
      padding-right: max(14px, env(safe-area-inset-right));
      min-height: 100%;
    }

    .wrap{
      max-width: 720px;
      margin: 0 auto;
      padding: 18px 14px 18px;
      display:flex;
      flex-direction:column;
      gap: 14px;
      min-height: calc(100vh - max(14px, env(safe-area-inset-top)) - max(14px, env(safe-area-inset-bottom)));
    }

    /* Header (simple) */
    .topbar{
      border: 1px solid var(--border);
      background: rgba(17,24,39,0.72);
      backdrop-filter: blur(10px);
      border-radius: var(--radius);
      box-shadow: var(--shadow2);
      padding: 14px 14px;
      position: sticky;
      top: max(10px, env(safe-area-inset-top));
      z-index: 10;
    }

    .title{
      margin:0;
      font-size: 18px;
      font-weight: 850;
      letter-spacing: 0.2px;
      display:flex;
      align-items:center;
      gap:10px;
    }

    .mark{
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, var(--accent2), var(--accent));
      box-shadow: 0 0 18px rgba(249,115,22,0.35);
      flex: 0 0 auto;
    }

    .subtitle{
      margin: 6px 0 0;
      font-size: 13px;
      color: var(--muted);
    }

    /* Kiosk-style big buttons */
    .list{
      display:flex;
      flex-direction:column;
      gap: 14px;
      margin-top: 4px;
      flex: 1 1 auto;
    }

    .bigbtn{
      width:100%;
      border: 1px solid rgba(249,115,22,0.35);
      border-radius: 24px;
      background:
        radial-gradient(900px 220px at 25% 20%, rgba(249,115,22,0.22), transparent 55%),
        linear-gradient(180deg, rgba(31,41,55,0.92), rgba(17,24,39,0.92));
      box-shadow: var(--shadow);
      padding: 18px 16px;
      cursor:pointer;
      text-align:center;
      user-select:none;
      touch-action: manipulation;
      transition: transform 140ms ease, box-shadow 140ms ease, border-color 140ms ease;
      position: relative;
      overflow:hidden;
    }

    /* subtle sheen */
    .bigbtn::before{
      content:"";
      position:absolute;
      top:-40%;
      left:-30%;
      width: 60%;
      height: 180%;
      transform: rotate(18deg);
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.10), transparent);
      opacity: 0.55;
      pointer-events:none;
    }

    .bigbtn:hover{
      transform: translateY(-1px);
      border-color: rgba(249,115,22,0.60);
      box-shadow: 0 22px 55px rgba(0,0,0,0.42);
    }
    .bigbtn:active{ transform: translateY(0px); }
    .bigbtn:focus-visible{
      outline:none;
      box-shadow: 0 0 0 4px rgba(249,115,22,0.22), 0 22px 55px rgba(0,0,0,0.42);
      border-color: rgba(249,115,22,0.75);
    }

    .bigbtn .name{
      margin:0;
      font-size: 28px; /* HUGE for readability */
      font-weight: 950;
      letter-spacing: 0.4px;
      line-height: 1.1;
      color: rgba(255,255,255,0.98);
      text-shadow: 0 2px 0 rgba(0,0,0,0.35), 0 16px 30px rgba(0,0,0,0.35);
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }

    .bigbtn .hint{
      margin: 10px 0 0;
      font-size: 14px;
      color: rgba(249,115,22,0.95);
      font-weight: 800;
      letter-spacing: 0.8px;
      text-transform: uppercase;
    }

    .bigbtn .hint span{
      display:inline-block;
      border: 1px solid rgba(249,115,22,0.35);
      background: rgba(249,115,22,0.10);
      padding: 8px 12px;
      border-radius: 999px;
      box-shadow: 0 12px 20px rgba(0,0,0,0.18);
    }

    /* Footer (Canadian Salad quiet style) */
    .app-footer{
      margin-top: 8px;
      padding-bottom: env(safe-area-inset-bottom);
      text-align: center;
      font-size: 12px;
      color: var(--muted);
      opacity: 0.75;
      user-select: none;
    }

    /* Minimal error box */
    .error{
      border: 1px solid rgba(239,68,68,0.35);
      background: rgba(239,68,68,0.10);
      color: rgba(254,202,202,0.95);
      border-radius: 16px;
      padding: 14px 14px;
      font-size: 13px;
      text-align:center;
    }

    /* Make the big titles wrap on very small screens */
    @media (max-width: 360px){
      .bigbtn .name{
        font-size: 24px;
        white-space: normal;
      }
    }
  </style>
</head>

<body>
  <div class="safe">
    <div class="wrap">

      <header class="topbar">
        <h1 class="title"><span class="mark"></span>Scorekeeper Hub</h1>
        <p class="subtitle">Tap a game to start</p>
      </header>

      <main>
        <div id="list" class="list"></div>
      </main>

      <footer class="app-footer">Cote Free Time Productions</footer>
    </div>
  </div>

  <script>
    (function(){
      const CONFIG_URL = "./scorers.json";
      const listEl = document.getElementById("list");

      function clear(){ listEl.innerHTML = ""; }

      function isValidScorer(s){
        return s && typeof s.name === "string" && s.name.trim()
               && typeof s.url === "string" && s.url.trim();
      }

      function goTo(url){
        window.location.href = url;
      }

      function makeButton(scorer){
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "bigbtn";
        btn.setAttribute("aria-label", `Open ${scorer.name} scorer`);

        const name = document.createElement("p");
        name.className = "name";
        name.textContent = scorer.name;

        const hint = document.createElement("p");
        hint.className = "hint";
        hint.innerHTML = "<span>Tap to Start</span>";

        btn.appendChild(name);
        btn.appendChild(hint);

        btn.addEventListener("click", () => goTo(scorer.url.trim()));
        return btn;
      }

      async function load(){
        clear();
        try{
          const res = await fetch(CONFIG_URL, { cache: "no-store" });
          if(!res.ok) throw new Error(`HTTP ${res.status}`);
          const data = await res.json();
          const scorers = Array.isArray(data.scorers) ? data.scorers : [];

          const valid = scorers.filter(isValidScorer);
          if(valid.length === 0){
            const msg = document.createElement("div");
            msg.className = "error";
            msg.textContent = "No scorers found in scorers.json.";
            listEl.appendChild(msg);
            return;
          }

          valid.forEach(s => listEl.appendChild(makeButton(s)));
        } catch(e){
          console.error(e);
          const msg = document.createElement("div");
          msg.className = "error";
          msg.textContent = "Could not load scorers.json. (If running from file://, use a local server or GitHub Pages.)";
          listEl.appendChild(msg);
        }
      }

      load();
    })();
  </script>
</body>
</html>
